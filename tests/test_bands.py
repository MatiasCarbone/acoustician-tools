import sys

sys.path.append('../acoustician-tools')

import unittest
import numpy as np

from acoustician_tools.bands import *


class TestBands(unittest.TestCase):
    def test_octave_bands(self):
        expected = {
            'f_center': [15.625, 31.25, 62.5, 125.0, 250.0, 500.0, 1000, 2000, 4000, 8000, 16000],
            'f_bound': [
                (11.049, 22.097),
                (22.097, 44.194),
                (44.194, 88.388),
                (88.388, 176.777),
                (176.777, 353.553),
                (353.553, 707.107),
                (707.107, 1414.214),
                (1414.214, 2828.427),
                (2828.427, 5656.854),
                (5656.854, 11313.708),
                (11313.708, 22627.417),
            ],
        }
        self.assertDictEqual(octave_bands(), expected)

    def test_third_octave_bands(self):
        expected = {
            'f_center': [
                15.625,
                19.686,
                24.803,
                31.25,
                39.373,
                49.606,
                62.5,
                78.745,
                99.213,
                125.0,
                157.49,
                198.425,
                250.0,
                314.98,
                396.85,
                500.0,
                629.961,
                793.701,
                1000.0,
                1259.921,
                1587.401,
                2000.0,
                2519.842,
                3174.802,
                4000.0,
                5039.684,
                6349.604,
                8000.0,
                10079.368,
                12699.208,
                16000.0,
                20158.737,
            ],
            'f_bound': [
                (13.92, 17.538),
                (17.538, 22.097),
                (22.097, 27.841),
                (27.841, 35.077),
                (35.077, 44.194),
                (44.194, 55.681),
                (55.681, 70.154),
                (70.154, 88.388),
                (88.388, 111.362),
                (111.362, 140.308),
                (140.308, 176.777),
                (176.777, 222.725),
                (222.725, 280.616),
                (280.616, 353.553),
                (353.553, 445.449),
                (445.449, 561.231),
                (561.231, 707.107),
                (707.107, 890.899),
                (890.899, 1122.462),
                (1122.462, 1414.214),
                (1414.214, 1781.797),
                (1781.797, 2244.924),
                (2244.924, 2828.427),
                (2828.427, 3563.595),
                (3563.595, 4489.848),
                (4489.848, 5656.854),
                (5656.854, 7127.19),
                (7127.19, 8979.696),
                (8979.696, 11313.708),
                (11313.708, 14254.379),
                (14254.379, 17959.393),
                (17959.393, 22627.417),
            ],
        }
        self.assertDictEqual(third_octave_bands(), expected)


if __name__ == '__main__':
    unittest.main()
